{% extends 'blog/base.html' %}
{% block content %}
    <h3 class="mb-3">Posty z kategorii:  {{ view.kwargs.category}} ({{ page_obj.paginator.count }})</h3>

    {% for post in posts %}
        <div class="col-12">
            <h3><a class="text-dark"  href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h3>
        </div>

        <div class="text-muted mb-3">
                {% if user.is_authenticated and post.author == user%}
                    {% if post == 'publish' %}
                        Opublikowany przez:
                    {% else %}
                        Szkic:
                    {% endif %}
                 {% endif %}
                <a class="text-dark" href="{% url 'post-users' post.author.username %}" > {{ post.author }}</a>
                    - {{ post.created_date|date:"d F, Y" }}
                <a class="text-dark" href="{% url 'category-post' post.category.name %}" >{{ post.category }}</a>
        </div>
        <div class="col-12">
            <p>{{ post.content|truncatewords:30|safe }}
                <a class="text-dark" href="{% url 'post-detail' post.pk %}">czytaj dalej </a>
            </p>
        </div>
    {% endfor %}

<div>
{% if is_paginated %}
        {% if page_obj.has_previous %}
            <a class="btn btn-outline-secondary mb-4" href="?page=1">Pierwsza</a>
            <a class="btn btn-outline-secondary mb-4" href="?page={{ page_obj.previous_page_number }}">Poprzednia</a>
        {% endif %}

      {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
          <a class="btn btn-info-secondary mb-4" href="?page={{ num }}">{{ num }}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <a class="btn btn-outline-secondary mb-4" href="?page={{ num }}">{{ num }}</a>
        {% endif %}
      {% endfor %}


      {% if page_obj.has_next %}
        <a class="btn btn-outline-secondary mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
        <a class="btn btn-outline-secondary mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
      {% endif %}

    {% endif %}
</div>
{% endblock %}